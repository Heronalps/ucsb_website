<!DOCTYPE html>
<!--
  Copyright 2010 Google Inc.

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.

  Original slides: Marcin Wichary (mwichary@google.com)
  Modifications: Ernest Delgado (ernestd@google.com)
                 Alex Russell (slightlyoff@chromium.org)

  landslide modifications: Adam Zapletal (adamzap@gmail.com)
                           Nicolas Perriault (nperriault@gmail.com)
-->
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Server-side Caching and Deploying on AWS</title>
    <!-- Styles -->
    
    <link rel="stylesheet" media="print" href="theme/css/print.css">
    <link rel="stylesheet" media="screen, projection" href="theme/css/screen.css">
    
    
      
      <link rel="stylesheet" href="theme/css/custom.css">
      
    
    <!-- /Styles -->
    <!-- Javascripts -->
    
    <script type="text/javascript" src="theme/js/slides.js"></script>
    
    
    
    <!-- /Javascripts -->

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-67332703-1', 'auto');
      ga('send', 'pageview');
    </script>
</head>
<body>
  <div id="blank"></div>
  <div class="presentation">
    <div id="current_presenter_notes">
      <div id="presenter_note"></div>
    </div>
    <div class="slides">
      
      <!-- slide source: 08_server_side_caching_and_deploying_on_aws.md -->
      <div class="slide-wrapper">
        <div class="slide title slide-1">
          <div class="inner">
            
            <header><h1>Server-side Caching and Deploying on AWS</h1></header>
            
            
            <section><p><strong>CS290B</strong></p>
<p>Dr. Bryce Boe</p>
<p>October 20, 2015</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="08_server_side_caching_and_deploying_on_aws.md">08_server_side_caching_and_deploying_on_aws.md</a>
            </aside>
            
            <aside class="page_number">
              1/16
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 08_server_side_caching_and_deploying_on_aws.md -->
      <div class="slide-wrapper">
        <div class="slide slide-2">
          <div class="inner">
            
            <header><h1>Today's Agenda</h1></header>
            
            
            <section><ul>
<li>High Availability Review</li>
<li>Client-Side Caching Review</li>
<li>Server-side Caching</li>
<li>Deploying on Amazon Web Services (AWS)</li>
</ul></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="08_server_side_caching_and_deploying_on_aws.md">08_server_side_caching_and_deploying_on_aws.md</a>
            </aside>
            
            <aside class="page_number">
              2/16
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 08_server_side_caching_and_deploying_on_aws.md -->
      <div class="slide-wrapper">
        <div class="slide slide-3">
          <div class="inner">
            
            <header><h1>High Availability Review</h1></header>
            
            
            <section><p><img alt="High Availability in Two Sites" src="img/dual_site_availability.png" /></p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="08_server_side_caching_and_deploying_on_aws.md">08_server_side_caching_and_deploying_on_aws.md</a>
            </aside>
            
            <aside class="page_number">
              3/16
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 08_server_side_caching_and_deploying_on_aws.md -->
      <div class="slide-wrapper">
        <div class="slide slide-4">
          <div class="inner">
            
            <header><h1>Client-side Caching Review</h1></header>
            
            
            <section><p><img alt="Defining optimal Cache-Control policy" src="img/http-cache-decision-tree.png" /></p>
<p>Source: <a href="https://developers.google.com/web/fundamentals/performance/optimizing-content-efficiency/http-caching">https://developers.google.com/web/fundamentals/performance/optimizing-content-efficiency/http-caching</a></p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="08_server_side_caching_and_deploying_on_aws.md">08_server_side_caching_and_deploying_on_aws.md</a>
            </aside>
            
            <aside class="page_number">
              4/16
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 08_server_side_caching_and_deploying_on_aws.md -->
      <div class="slide-wrapper">
        <div class="slide slide-5">
          <div class="inner">
            
            <header><h1>Client-side Caching in Rails</h1></header>
            
            
            <section><ul>
<li>
<p>Use <code>stale?</code> if you want to conditionally execute a section of code only
  if the client doesn't have a cached version.</p>
</li>
<li>
<p>Use <code>fresh_when</code> if you only want to use/set the cache headers.</p>
</li>
</ul></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="08_server_side_caching_and_deploying_on_aws.md">08_server_side_caching_and_deploying_on_aws.md</a>
            </aside>
            
            <aside class="page_number">
              5/16
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 08_server_side_caching_and_deploying_on_aws.md -->
      <div class="slide-wrapper">
        <div class="slide slide-6">
          <div class="inner">
            
            <header><h1>Goals for Today</h1></header>
            
            
            <section><h2>After today you should understand...</h2>
<ul>
<li>why server-side caching exists</li>
<li>what options you have when using server-side caching</li>
<li>how to use server-side caching in your projects</li>
<li>how to deploy on AWS using CloudFormation</li>
</ul></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="08_server_side_caching_and_deploying_on_aws.md">08_server_side_caching_and_deploying_on_aws.md</a>
            </aside>
            
            <aside class="page_number">
              6/16
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 08_server_side_caching_and_deploying_on_aws.md -->
      <div class="slide-wrapper">
        <div class="slide slide-7">
          <div class="inner">
            
            <header><h1>Caching HTTP Responses: Motivation</h1></header>
            
            
            <section><p>A single web server process repeatedly responds to HTTP requests from a variety
of clients.</p>
<p>Responding to each request requires computation and/or I/O to be
performed, both of which can be expensive.</p>
<p>In practice, there is a significant amount of similarity between HTTP
responses.</p>
<p>In the client-side caching lecture we looked at optimizing scenarios where
requests for the same resource would result in an identical response.</p>
<p>In this lecture we will look at optimizing scenarios where repeated responses
are not identical, but similar.</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="08_server_side_caching_and_deploying_on_aws.md">08_server_side_caching_and_deploying_on_aws.md</a>
            </aside>
            
            <aside class="page_number">
              7/16
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 08_server_side_caching_and_deploying_on_aws.md -->
      <div class="slide-wrapper">
        <div class="slide slide-8">
          <div class="inner">
            
            <header><h1>Caching HTTP Responses</h1></header>
            
            
            <section><blockquote>
<p>With respect to HTTP responses for a single web service, which parts of a
response are similar to responses for other resources?</p>
</blockquote></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="08_server_side_caching_and_deploying_on_aws.md">08_server_side_caching_and_deploying_on_aws.md</a>
            </aside>
            
            <aside class="page_number">
              8/16
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 08_server_side_caching_and_deploying_on_aws.md -->
      <div class="slide-wrapper">
        <div class="slide slide-9">
          <div class="inner">
            
            <header><h1>Caching HTTP Responses</h1></header>
            
            
            <section><blockquote>
<p>With respect to HTTP responses for a single web service, which parts of a
response are similar to responses for other resources?</p>
</blockquote>
<ul>
<li>View fragments</li>
<li>Rarely modified ORM objects</li>
<li>Expensive to compute data</li>
</ul></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="08_server_side_caching_and_deploying_on_aws.md">08_server_side_caching_and_deploying_on_aws.md</a>
            </aside>
            
            <aside class="page_number">
              9/16
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 08_server_side_caching_and_deploying_on_aws.md -->
      <div class="slide-wrapper">
        <div class="slide has_code slide-10">
          <div class="inner">
            
            <header><h1>View Fragments</h1></header>
            
            
            <section><p>View fragments are items that are similar across pages such as the header,
footer, sidebar, or even an item listing that may appear in multiple locations
(product listings, search results, product suggestions).</p>
<p>Sidebar Fragment (shown on all cs290.com pages)</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18</pre></div></td><td class="code"><div class="highlight"><pre><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;col-md-3 hidden-xs&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;sidebar well&quot;</span><span class="nt">&gt;</span>
    Scalable Internet Services, CS290B, Fall 2015
  <span class="nt">&lt;/div&gt;</span>

  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;sidebar well&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;h1</span> <span class="na">id=</span><span class="s">&quot;course-information&quot;</span><span class="nt">&gt;</span>Course Information<span class="nt">&lt;/h1&gt;</span>
    <span class="nt">&lt;h2</span> <span class="na">id=</span><span class="s">&quot;instructor&quot;</span><span class="nt">&gt;</span>Instructor<span class="nt">&lt;/h2&gt;</span>
    <span class="nt">&lt;p&gt;&lt;a</span> <span class="na">href=</span><span class="s">&quot;http://cs.ucsb.edu/~bboe&quot;</span><span class="nt">&gt;</span>Dr. Bryce Boe<span class="nt">&lt;/a&gt;</span>

    <span class="nt">&lt;h2</span> <span class="na">id=</span><span class="s">&quot;lecture&quot;</span><span class="nt">&gt;</span>Lecture<span class="nt">&lt;/h2&gt;</span>
    <span class="nt">&lt;p&gt;</span>Tuesday and Thursday<span class="nt">&lt;br</span> <span class="nt">/&gt;</span>
       3:00pm – 4:50pm<span class="nt">&lt;/p&gt;</span>

    ...

  <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</pre></div>
</td></tr></table></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="08_server_side_caching_and_deploying_on_aws.md">08_server_side_caching_and_deploying_on_aws.md</a>
            </aside>
            
            <aside class="page_number">
              10/16
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 08_server_side_caching_and_deploying_on_aws.md -->
      <div class="slide-wrapper">
        <div class="slide slide-11">
          <div class="inner">
            
            <header><h1>Rarely Modified ORM Objects</h1></header>
            
            
            <section><ul>
<li>User permissions</li>
<li>Configuration options</li>
<li>Product details (on a shopping site)</li>
<li>In general, any database-backed data that seldom changes</li>
</ul></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="08_server_side_caching_and_deploying_on_aws.md">08_server_side_caching_and_deploying_on_aws.md</a>
            </aside>
            
            <aside class="page_number">
              11/16
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 08_server_side_caching_and_deploying_on_aws.md -->
      <div class="slide-wrapper">
        <div class="slide slide-12">
          <div class="inner">
            
            <header><h1>Expensive to Compute Data</h1></header>
            
            
            <section><p>Expensive to compute data is exactly what the name suggests. Expensive may mean
it takes a significant amount of time to compute, or maybe it is best suited
for a background worker due to hardware constraints on the application servers.</p>
<h2>Examples</h2>
<ul>
<li>Total account balance on Mint</li>
<li>Monthly account summary on Google</li>
<li>The complete diff between two commits on GitHub</li>
<li>The list of suggested contacts on LinkedIn</li>
</ul></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="08_server_side_caching_and_deploying_on_aws.md">08_server_side_caching_and_deploying_on_aws.md</a>
            </aside>
            
            <aside class="page_number">
              12/16
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 08_server_side_caching_and_deploying_on_aws.md -->
      <div class="slide-wrapper">
        <div class="slide slide-13">
          <div class="inner">
            
            <header><h1>Semi-Expensive Operations</h1></header>
            
            
            <section><p>View fragments are produced by extensive string manipulation. In ruby, many
string manipulations with portions loaded from disk can result in a significant
amount of time.</p>
<p>Every query to the database utilizes its resources. Optimizing for similar
queries can minimize the chance of a database bottleneck.</p>
<blockquote>
<p>Assuming we want to keep previously computed results around between requests,
how can we do it?</p>
<p>Where can we store the cached results?</p>
</blockquote></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="08_server_side_caching_and_deploying_on_aws.md">08_server_side_caching_and_deploying_on_aws.md</a>
            </aside>
            
            <aside class="page_number">
              13/16
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 08_server_side_caching_and_deploying_on_aws.md -->
      <div class="slide-wrapper">
        <div class="slide slide-14">
          <div class="inner">
            
            <header><h1>Storing Cached Results</h1></header>
            
            
            <section><p>Option 1: In memory on the application server</p>
<p>Option 2: On the filesystem</p>
<p>Option 3: In memory on another machine</p>
<p>Now, let's look into each of these options. But first a look at latency.</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="08_server_side_caching_and_deploying_on_aws.md">08_server_side_caching_and_deploying_on_aws.md</a>
            </aside>
            
            <aside class="page_number">
              14/16
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 08_server_side_caching_and_deploying_on_aws.md -->
      <div class="slide-wrapper">
        <div class="slide slide-15">
          <div class="inner">
            
            <header><h1>Latency Numbers (ns and μs)</h1></header>
            
            
            <section><p><img alt="Latency Numbers Every Programmer Should Know" src="img/latency_1_2015.png" /></p>
<p>Source: http://www.eecs.berkeley.edu/~rcs/research/interactive_latency.html</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="08_server_side_caching_and_deploying_on_aws.md">08_server_side_caching_and_deploying_on_aws.md</a>
            </aside>
            
            <aside class="page_number">
              15/16
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 08_server_side_caching_and_deploying_on_aws.md -->
      <div class="slide-wrapper">
        <div class="slide slide-16">
          <div class="inner">
            
            <header><h1>Latency Numbers (μs and ms)</h1></header>
            
            
            <section><p><img alt="Latency Numbers Every Programmer Should Know" src="img/latency_2_2015.png" /></p>
<p>Source: http://www.eecs.berkeley.edu/~rcs/research/interactive_latency.html</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="08_server_side_caching_and_deploying_on_aws.md">08_server_side_caching_and_deploying_on_aws.md</a>
            </aside>
            
            <aside class="page_number">
              16/16
            </aside>
          </footer>
        </div>
      </div>
      
    </div>
  </div>
  
  <div id="toc" class="sidebar hidden">
    <h2>Table of Contents</h2>
    <table>
      <caption>Table of Contents</caption>
      
      <tr id="toc-row-1">
        <th><a href="#slide1">Server-side Caching and Deploying on AWS</a></th>
        <td><a href="#slide1">1</a></td>
      </tr>
      
      
      <tr id="toc-row-2">
        <th><a href="#slide2">Today's Agenda</a></th>
        <td><a href="#slide2">2</a></td>
      </tr>
      
      
      <tr id="toc-row-3">
        <th><a href="#slide3">High Availability Review</a></th>
        <td><a href="#slide3">3</a></td>
      </tr>
      
      
      <tr id="toc-row-4">
        <th><a href="#slide4">Client-side Caching Review</a></th>
        <td><a href="#slide4">4</a></td>
      </tr>
      
      
      <tr id="toc-row-5">
        <th><a href="#slide5">Client-side Caching in Rails</a></th>
        <td><a href="#slide5">5</a></td>
      </tr>
      
      
      <tr id="toc-row-6">
        <th><a href="#slide6">Goals for Today</a></th>
        <td><a href="#slide6">6</a></td>
      </tr>
      
      
      <tr id="toc-row-7">
        <th><a href="#slide7">Caching HTTP Responses: Motivation</a></th>
        <td><a href="#slide7">7</a></td>
      </tr>
      
      
      <tr id="toc-row-8">
        <th><a href="#slide8">Caching HTTP Responses</a></th>
        <td><a href="#slide8">8</a></td>
      </tr>
      
      
      <tr id="toc-row-9">
        <th><a href="#slide9">Caching HTTP Responses</a></th>
        <td><a href="#slide9">9</a></td>
      </tr>
      
      
      <tr id="toc-row-10">
        <th><a href="#slide10">View Fragments</a></th>
        <td><a href="#slide10">10</a></td>
      </tr>
      
      
      <tr id="toc-row-11">
        <th><a href="#slide11">Rarely Modified ORM Objects</a></th>
        <td><a href="#slide11">11</a></td>
      </tr>
      
      
      <tr id="toc-row-12">
        <th><a href="#slide12">Expensive to Compute Data</a></th>
        <td><a href="#slide12">12</a></td>
      </tr>
      
      
      <tr id="toc-row-13">
        <th><a href="#slide13">Semi-Expensive Operations</a></th>
        <td><a href="#slide13">13</a></td>
      </tr>
      
      
      <tr id="toc-row-14">
        <th><a href="#slide14">Storing Cached Results</a></th>
        <td><a href="#slide14">14</a></td>
      </tr>
      
      
      <tr id="toc-row-15">
        <th><a href="#slide15">Latency Numbers (ns and μs)</a></th>
        <td><a href="#slide15">15</a></td>
      </tr>
      
      
      <tr id="toc-row-16">
        <th><a href="#slide16">Latency Numbers (μs and ms)</a></th>
        <td><a href="#slide16">16</a></td>
      </tr>
      
      
    </table>
  </div>
  
  <div id="help" class="sidebar hidden">
    <h2>Help</h2>
    <table>
      <caption>Help</caption>
      <tr>
        <th>Table of Contents</th>
        <td>t</td>
      </tr>
      <tr>
        <th>Exposé</th>
        <td>ESC</td>
      </tr>
      <tr>
        <th>Full screen slides</th>
        <td>e</td>
      </tr>
      <tr>
        <th>Presenter View</th>
        <td>p</td>
      </tr>
      <tr>
        <th>Source Files</th>
        <td>s</td>
      </tr>
      <tr>
        <th>Slide Numbers</th>
        <td>n</td>
      </tr>
      <tr>
        <th>Toggle screen blanking</th>
        <td>b</td>
      </tr>
      <tr>
        <th>Show/hide slide context</th>
        <td>c</td>
      </tr>
      <tr>
        <th>Notes</th>
        <td>2</td>
      </tr>
      <tr>
        <th>Help</th>
        <td>h</td>
      </tr>
    </table>
  </div>
  <script>main()</script>
</body>
</html>