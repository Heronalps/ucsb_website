<!DOCTYPE html>
<!--
  Copyright 2010 Google Inc.

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.

  Original slides: Marcin Wichary (mwichary@google.com)
  Modifications: Ernest Delgado (ernestd@google.com)
                 Alex Russell (slightlyoff@chromium.org)

  landslide modifications: Adam Zapletal (adamzap@gmail.com)
                           Nicolas Perriault (nperriault@gmail.com)
-->
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>High Availability and Client-side Caching</title>
    <!-- Styles -->
    
    <link rel="stylesheet" media="print" href="theme/css/print.css">
    <link rel="stylesheet" media="screen, projection" href="theme/css/screen.css">
    
    
      
      <link rel="stylesheet" href="theme/css/custom.css">
      
    
    <!-- /Styles -->
    <!-- Javascripts -->
    
    <script type="text/javascript" src="theme/js/slides.js"></script>
    
    
    
    <!-- /Javascripts -->

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-67332703-1', 'auto');
      ga('send', 'pageview');
    </script>
</head>
<body>
  <div id="blank"></div>
  <div class="presentation">
    <div id="current_presenter_notes">
      <div id="presenter_note"></div>
    </div>
    <div class="slides">
      
      <!-- slide source: 07_high_availability_and_client_side_caching.md -->
      <div class="slide-wrapper">
        <div class="slide title slide-1">
          <div class="inner">
            
            <header><h1>High Availability and Client-side Caching</h1></header>
            
            
            <section><p><strong>CS290B</strong></p>
<p>Dr. Bryce Boe</p>
<p>October 15, 2015</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="07_high_availability_and_client_side_caching.md">07_high_availability_and_client_side_caching.md</a>
            </aside>
            
            <aside class="page_number">
              1/61
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 07_high_availability_and_client_side_caching.md -->
      <div class="slide-wrapper">
        <div class="slide slide-2">
          <div class="inner">
            
            <header><h1>Today's Agenda</h1></header>
            
            
            <section><ul>
<li>TODO</li>
<li>Scaling Review</li>
<li>Corrections</li>
<li>High Availability</li>
<li>Client-side Caching</li>
</ul></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="07_high_availability_and_client_side_caching.md">07_high_availability_and_client_side_caching.md</a>
            </aside>
            
            <aside class="page_number">
              2/61
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 07_high_availability_and_client_side_caching.md -->
      <div class="slide-wrapper">
        <div class="slide slide-3">
          <div class="inner">
            
            <header><h1>TODO</h1></header>
            
            
            <section><h2>Should be done</h2>
<ul>
<li>Agile Web Development with Rails up through chapter 17</li>
<li>As much progress on Sprint 1 commitment as possible</li>
</ul></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="07_high_availability_and_client_side_caching.md">07_high_availability_and_client_side_caching.md</a>
            </aside>
            
            <aside class="page_number">
              3/61
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 07_high_availability_and_client_side_caching.md -->
      <div class="slide-wrapper">
        <div class="slide slide-4">
          <div class="inner">
            
            <header><h1>Scaling Review</h1></header>
            
            
            <section><h2>Vertical Scaling</h2>
<p>Buying "bigger" hardware and scaling <em>up</em></p>
<ul>
<li><strong>PRO</strong>: Easy</li>
<li><strong>CON</strong>: Limited</li>
<li><strong>CON</strong>: Non-linear increase in cost when scaling</li>
</ul>
<h2>Horizontal Scaling</h2>
<p>Buying move servers and scaling <em>out</em></p>
<ul>
<li><strong>PRO</strong>: Easy to add more servers (limited by data center space)</li>
<li><strong>PRO</strong>: Linear increase in cost when scaling</li>
<li><strong>CON</strong>: More moving parts makes things more complicated</li>
</ul></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="07_high_availability_and_client_side_caching.md">07_high_availability_and_client_side_caching.md</a>
            </aside>
            
            <aside class="page_number">
              4/61
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 07_high_availability_and_client_side_caching.md -->
      <div class="slide-wrapper">
        <div class="slide slide-5">
          <div class="inner">
            
            <header><h1>Last Lecture Corrections</h1></header>
            
            
            <section><p>HTTP Reverse Proxies are Layer <strong>7</strong> (not layer <strong>6</strong>)</p>
<p>The TCP session example demonstrates a TCP proxy version of load
balancing. While this approach works, it requires a TCP connection from the
client to the load balancer and another connection form the load balancer to
the server.</p>
<p>Of course the load balancer can maintain a pool of connections to
each application server minimizing the overhead of TCP connection
establishment.</p>
<p>The other version of TCP load balancing simply rewrites packets (both incoming
and outgoing). This process is similar to how NAT (network address translation)
works.</p>
<p>ELB's TCP-level load balancing does it via the TCP proxy method.</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="07_high_availability_and_client_side_caching.md">07_high_availability_and_client_side_caching.md</a>
            </aside>
            
            <aside class="page_number">
              5/61
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 07_high_availability_and_client_side_caching.md -->
      <div class="slide-wrapper">
        <div class="slide slide-6">
          <div class="inner">
            
            <header><h1>High Availability Motivation</h1></header>
            
            
            <section><p>Modern web applications power some very important parts of our lives.</p>
<ul>
<li>Banking</li>
<li>Medical</li>
<li>Telephony</li>
</ul>
<p>Having anytime access to these services (high availability) is increasingly
important.</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="07_high_availability_and_client_side_caching.md">07_high_availability_and_client_side_caching.md</a>
            </aside>
            
            <aside class="page_number">
              6/61
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 07_high_availability_and_client_side_caching.md -->
      <div class="slide-wrapper">
        <div class="slide slide-7">
          <div class="inner">
            
            <header><h1>Expressing Availability</h1></header>
            
            
            <section><p>Companies offering services will often advertise some number of nines
availability:</p>
<ul>
<li>Three nines: 99.9% uptime, 525.6 minutes of downtime a year (43.8/mo)</li>
<li>Four nines: 99.99% uptime, 52.6 minutes of downtime a year (4.38/mo)<ul>
<li>Desired by many business applications</li>
</ul>
</li>
<li>Five nines: 99.999% uptime, 5.3 minutes of downtime a year (26.5s/mo)<ul>
<li>Desired by communication companies</li>
</ul>
</li>
</ul>
<p>Downtime usually only includes unplanned outages. Scheduled outages, no matter
how frequent, are usually not incorporated in marketing material.</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="07_high_availability_and_client_side_caching.md">07_high_availability_and_client_side_caching.md</a>
            </aside>
            
            <aside class="page_number">
              7/61
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 07_high_availability_and_client_side_caching.md -->
      <div class="slide-wrapper">
        <div class="slide slide-8">
          <div class="inner">
            
            <header><h1>Question</h1></header>
            
            
            <section><blockquote>
<p>What are possible causes of failures?</p>
</blockquote>
<p><img alt="Full network topology" src="img/full_stack.png" /></p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="07_high_availability_and_client_side_caching.md">07_high_availability_and_client_side_caching.md</a>
            </aside>
            
            <aside class="page_number">
              8/61
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 07_high_availability_and_client_side_caching.md -->
      <div class="slide-wrapper">
        <div class="slide slide-9">
          <div class="inner">
            
            <header><h1>What if...</h1></header>
            
            
            <section><blockquote>
<p>What are possible causes of failures?</p>
</blockquote>
<ul>
<li>a server process hangs?</li>
<li>a server process dies?</li>
<li>an application server fails?</li>
<li>the load balancer fails?</li>
<li>the switch fails?</li>
<li>the router fails?</li>
<li>the Internet fails?</li>
<li>the database fails?</li>
<li>the entire datacenter fails?</li>
</ul></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="07_high_availability_and_client_side_caching.md">07_high_availability_and_client_side_caching.md</a>
            </aside>
            
            <aside class="page_number">
              9/61
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 07_high_availability_and_client_side_caching.md -->
      <div class="slide-wrapper">
        <div class="slide img-left slide-10">
          <div class="inner">
            
            <header><h1>Handling Application Server Failure</h1></header>
            
            
            <section><p><img alt="Single application server" src="img/application_server.png" /></p>
<p>We've already discussed the components of this sort of failure.</p>
<ul>
<li>Process-level isolation reduces hanging, or dead processes by having other
  processes to pick up the slack.</li>
<li>A process in an infinite loop may add unnecessary load to the server, so it's
  important to have monitoring to detect such issues.</li>
<li>Having a load-balanced configuration permits failing servers (high load or
dead) by having a pool of other servers to direct traffic to.</li>
</ul></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="07_high_availability_and_client_side_caching.md">07_high_availability_and_client_side_caching.md</a>
            </aside>
            
            <aside class="page_number">
              10/61
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 07_high_availability_and_client_side_caching.md -->
      <div class="slide-wrapper">
        <div class="slide slide-11">
          <div class="inner">
            
            <header><h1>How do we Handle Load Balancer Failure?</h1></header>
            
            
            <section><p><img alt="Single load balancer" src="img/single_load_balancer.png" /></p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="07_high_availability_and_client_side_caching.md">07_high_availability_and_client_side_caching.md</a>
            </aside>
            
            <aside class="page_number">
              11/61
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 07_high_availability_and_client_side_caching.md -->
      <div class="slide-wrapper">
        <div class="slide img-left slide-12">
          <div class="inner">
            
            <header><h1>Redundant Load Balancers</h1></header>
            
            
            <section><p><img alt="Redundant load balancers" src="img/redundant_load_balancers.png" /></p>
<p>Buy two load balancers. One is the primary, and the other is the failover.</p>
<p>Load balancers communicate via a heartbeat to determine the health of each
other.</p>
<ul>
<li><em>During a failover, what happens to established flows?</em></li>
<li><em>During a failover, what happens to the IP address?</em></li>
</ul></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="07_high_availability_and_client_side_caching.md">07_high_availability_and_client_side_caching.md</a>
            </aside>
            
            <aside class="page_number">
              12/61
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 07_high_availability_and_client_side_caching.md -->
      <div class="slide-wrapper">
        <div class="slide slide-13">
          <div class="inner">
            
            <header><h1>Load Balancer Failover</h1></header>
            
            
            <section><p>When the failure determines it needs to become the primary (detected via lack
of heartbeat), it issues a gratuitous ARP for the load balanced IP.</p>
<p>The gratuitous ARP (layer 2) will inform the switch that traffic should be
delivered to the port that leads to the former failover (now primary).</p>
<p>All new packets will transparently be delivered to the new primary load
balancer.</p>
<p>Established flows can be supported depending on how much information sharing
occurs between the load balancers.</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="07_high_availability_and_client_side_caching.md">07_high_availability_and_client_side_caching.md</a>
            </aside>
            
            <aside class="page_number">
              13/61
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 07_high_availability_and_client_side_caching.md -->
      <div class="slide-wrapper">
        <div class="slide slide-14">
          <div class="inner">
            
            <header><h1>How do we Handle Switch Failure?</h1></header>
            
            
            <section><p><img alt="Redundant load balancers" src="img/redundant_load_balancers.png" /></p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="07_high_availability_and_client_side_caching.md">07_high_availability_and_client_side_caching.md</a>
            </aside>
            
            <aside class="page_number">
              14/61
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 07_high_availability_and_client_side_caching.md -->
      <div class="slide-wrapper">
        <div class="slide slide-15">
          <div class="inner">
            
            <header><h1>Redundant Switches</h1></header>
            
            
            <section><p>Buy two switches! Again with a primary and failover and a heartbeat.</p>
<p>During failover similar issues occur but layer 2 should be stateles so no/less
synchronization needed.</p>
<p><img alt="Redundant switches" src="img/redundant_switches.png" /></p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="07_high_availability_and_client_side_caching.md">07_high_availability_and_client_side_caching.md</a>
            </aside>
            
            <aside class="page_number">
              15/61
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 07_high_availability_and_client_side_caching.md -->
      <div class="slide-wrapper">
        <div class="slide slide-16">
          <div class="inner">
            
            <header><h1>How do we Handle Router Failure?</h1></header>
            
            
            <section><p><img alt="Redundant switches" src="img/redundant_switches.png" /></p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="07_high_availability_and_client_side_caching.md">07_high_availability_and_client_side_caching.md</a>
            </aside>
            
            <aside class="page_number">
              16/61
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 07_high_availability_and_client_side_caching.md -->
      <div class="slide-wrapper">
        <div class="slide slide-17">
          <div class="inner">
            
            <header><h1>Redundant Routers</h1></header>
            
            
            <section><p>Buy two!</p>
<p>Similar heartbeat and failover system, with slightly different problems.</p>
<p><img alt="Redundant routers" src="img/redundant_routers.png" /></p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="07_high_availability_and_client_side_caching.md">07_high_availability_and_client_side_caching.md</a>
            </aside>
            
            <aside class="page_number">
              17/61
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 07_high_availability_and_client_side_caching.md -->
      <div class="slide-wrapper">
        <div class="slide slide-18">
          <div class="inner">
            
            <header><h1>How do we Handle Internet Failure?</h1></header>
            
            
            <section><p>Buy two! Use separate internet service providers (ISPs).</p>
<p><img alt="Redundant routers" src="img/redundant_routers.png" /></p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="07_high_availability_and_client_side_caching.md">07_high_availability_and_client_side_caching.md</a>
            </aside>
            
            <aside class="page_number">
              18/61
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 07_high_availability_and_client_side_caching.md -->
      <div class="slide-wrapper">
        <div class="slide slide-19">
          <div class="inner">
            
            <header><h1>Routing with Two ISPs</h1></header>
            
            
            <section><blockquote>
<p>How do we handle routing when we have two ISPs?</p>
</blockquote>
<h2>Outgoing Traffic (easy)</h2>
<p>We control how we send outbound traffic so we have some options:</p>
<ul>
<li>Pick the cheapest or most reliable link</li>
<li>Pick the <em>closer</em> link</li>
</ul>
<h2>Incoming Traffic (hard)</h2>
<p>We cannot inform clients by which path to reach our IP.</p>
<p>However, we can give hints by using BGP to persuade networks to prefer one path
over another. (Path prepending, Community values)</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="07_high_availability_and_client_side_caching.md">07_high_availability_and_client_side_caching.md</a>
            </aside>
            
            <aside class="page_number">
              19/61
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 07_high_availability_and_client_side_caching.md -->
      <div class="slide-wrapper">
        <div class="slide slide-20">
          <div class="inner">
            
            <header><h1>High Availability</h1></header>
            
            
            <section><p><img alt="High Availability Topology" src="img/high_availability.png" /></p>
<p>We will discuss database failover in another lecture.</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="07_high_availability_and_client_side_caching.md">07_high_availability_and_client_side_caching.md</a>
            </aside>
            
            <aside class="page_number">
              20/61
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 07_high_availability_and_client_side_caching.md -->
      <div class="slide-wrapper">
        <div class="slide slide-21">
          <div class="inner">
            
            <header><h1>Redundancy Everywhere!</h1></header>
            
            
            <section><p>So we have redundant systems in place.</p>
<blockquote>
<p>Can anything go wrong?</p>
</blockquote></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="07_high_availability_and_client_side_caching.md">07_high_availability_and_client_side_caching.md</a>
            </aside>
            
            <aside class="page_number">
              21/61
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 07_high_availability_and_client_side_caching.md -->
      <div class="slide-wrapper">
        <div class="slide slide-22">
          <div class="inner">
            
            <header><h1>Disaster Strikes</h1></header>
            
            
            <section><p><img alt="Hurricane Sandy from Satellite" src="img/hurricane_sandy_satellite.png" /></p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="07_high_availability_and_client_side_caching.md">07_high_availability_and_client_side_caching.md</a>
            </aside>
            
            <aside class="page_number">
              22/61
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 07_high_availability_and_client_side_caching.md -->
      <div class="slide-wrapper">
        <div class="slide slide-23">
          <div class="inner">
            
            <header><h1>Hurricane Sandy via Ars Technica</h1></header>
            
            
            <section><p><img alt="Hurrican Sandy Headline" src="img/hurricane_sandy_article.png" /></p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="07_high_availability_and_client_side_caching.md">07_high_availability_and_client_side_caching.md</a>
            </aside>
            
            <aside class="page_number">
              23/61
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 07_high_availability_and_client_side_caching.md -->
      <div class="slide-wrapper">
        <div class="slide slide-24">
          <div class="inner">
            
            <header><h1>Availability Axiom (Pete Tenereillo)</h1></header>
            
            
            <section><p>Source: <a href="http://www.tenereillo.com/GSLBPageOfShame.htm">http://www.tenereillo.com/GSLBPageOfShame.htm</a></p>
<blockquote>
<p>The only way to achieve high-availability for browser based clients is to
include the use of multiple A records.</p>
</blockquote>
<p>An A record is an IP address associated with a DNS host.</p>
<h2>Result</h2>
<ul>
<li>For performance we want to send the browser to one datacenter.</li>
<li>For availability we want to send the browser multiple A records.</li>
</ul>
<p>We end up having to make a choice between performance and availability.</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="07_high_availability_and_client_side_caching.md">07_high_availability_and_client_side_caching.md</a>
            </aside>
            
            <aside class="page_number">
              24/61
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 07_high_availability_and_client_side_caching.md -->
      <div class="slide-wrapper">
        <div class="slide slide-25">
          <div class="inner">
            
            <header><h1>Multisite High Availability</h1></header>
            
            
            <section><p><img alt="High Availability in Two Sites" src="img/dual_site_availability.png" /></p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="07_high_availability_and_client_side_caching.md">07_high_availability_and_client_side_caching.md</a>
            </aside>
            
            <aside class="page_number">
              25/61
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 07_high_availability_and_client_side_caching.md -->
      <div class="slide-wrapper">
        <div class="slide slide-26">
          <div class="inner">
            
            <header><h1>Client-side Caching</h1></header>
            
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="07_high_availability_and_client_side_caching.md">07_high_availability_and_client_side_caching.md</a>
            </aside>
            
            <aside class="page_number">
              26/61
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 07_high_availability_and_client_side_caching.md -->
      <div class="slide-wrapper">
        <div class="slide slide-27">
          <div class="inner">
            
            <header><h1>Client-side Caching Motivation</h1></header>
            
            
            <section><p>We want our important application data persisted safely in our data center.</p>
<p>This data will be regularly read and updated by geographically distributed
clients.</p>
<p>Our access to the data needs to be fast.</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="07_high_availability_and_client_side_caching.md">07_high_availability_and_client_side_caching.md</a>
            </aside>
            
            <aside class="page_number">
              27/61
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 07_high_availability_and_client_side_caching.md -->
      <div class="slide-wrapper">
        <div class="slide table-center slide-28">
          <div class="inner">
            
            <header><h1>Reponse Time and Human Perception</h1></header>
            
            
            <section><table>
<thead>
<tr>
<th align="right">Delay</th>
<th align="center">User Reaction</th>
</tr>
</thead>
<tbody>
<tr>
<td align="right">0 -  100 ms</td>
<td align="center">Instant</td>
</tr>
<tr>
<td align="right">100 -  300 ms</td>
<td align="center">Small perceptible delay</td>
</tr>
<tr>
<td align="right">300 - 1000 ms</td>
<td align="center">Machine is working</td>
</tr>
<tr>
<td align="right">1000+ ms</td>
<td align="center">Likely mental context switch</td>
</tr>
<tr>
<td align="right">10,000+ ms</td>
<td align="center">Task is abandoned</td>
</tr>
</tbody>
</table>
<p>Source: High Performance Browser Networking</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="07_high_availability_and_client_side_caching.md">07_high_availability_and_client_side_caching.md</a>
            </aside>
            
            <aside class="page_number">
              28/61
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 07_high_availability_and_client_side_caching.md -->
      <div class="slide-wrapper">
        <div class="slide table-center slide-29">
          <div class="inner">
            
            <header><h1>Minimum Latencies</h1></header>
            
            
            <section><table>
<thead>
<tr>
<th>Route</th>
<th>Distance</th>
<th>Time, light in vacuum</th>
<th>Time, light in fiber</th>
</tr>
</thead>
<tbody>
<tr>
<td>NYC to SF</td>
<td>4,148 km</td>
<td>14 ms</td>
<td>21 ms</td>
</tr>
<tr>
<td>NYC to London</td>
<td>5,585 km</td>
<td>19 ms</td>
<td>28 ms</td>
</tr>
<tr>
<td>NYC to Sydney</td>
<td>15,993 km</td>
<td>53 ms</td>
<td>80 ms</td>
</tr>
<tr>
<td>Equatorial circumference</td>
<td>40,075 km</td>
<td>133.7 ms</td>
<td>200 ms</td>
</tr>
</tbody>
</table>
<p>Source: High Performance Browser Networking</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="07_high_availability_and_client_side_caching.md">07_high_availability_and_client_side_caching.md</a>
            </aside>
            
            <aside class="page_number">
              29/61
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 07_high_availability_and_client_side_caching.md -->
      <div class="slide-wrapper">
        <div class="slide slide-30">
          <div class="inner">
            
            <header><h1>Multiple HTTP Requests per Page</h1></header>
            
            
            <section><p><img alt="Total Requests Per Page" src="img/httparchive_requests_per_page.png" /></p>
<p>Source: <a href="http://httparchive.org/interesting.php#reqTotal">http://httparchive.org/interesting.php#reqTotal</a></p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="07_high_availability_and_client_side_caching.md">07_high_availability_and_client_side_caching.md</a>
            </aside>
            
            <aside class="page_number">
              30/61
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 07_high_availability_and_client_side_caching.md -->
      <div class="slide-wrapper">
        <div class="slide slide-31">
          <div class="inner">
            
            <header><h1>Caching</h1></header>
            
            
            <section><p>The fastest request is one that never happens.</p>
<p><strong>Cache</strong>: a component that transparently stores data so that future requests
for the same data can be served faster</p>
<blockquote>
<p>Where can we introduce caching?</p>
</blockquote>
<ul>
<li>Inside the browser</li>
<li>In "front" of the server (CDNs, ISP cache, etc.)</li>
<li>Inside the application server</li>
<li>Inside the database (query cache)</li>
</ul></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="07_high_availability_and_client_side_caching.md">07_high_availability_and_client_side_caching.md</a>
            </aside>
            
            <aside class="page_number">
              31/61
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 07_high_availability_and_client_side_caching.md -->
      <div class="slide-wrapper">
        <div class="slide slide-32">
          <div class="inner">
            
            <header><h1>Client-side Caching</h1></header>
            
            
            <section><blockquote>
<p>How does the browser cache data?</p>
<p>How does the browser know when it can or cannot use cached data?</p>
</blockquote>
<p>The building blocks of caching are all provided via HTTP headers:</p>
<ul>
<li>cache-control<ul>
<li>no-store</li>
<li>no-cache</li>
<li>max-age</li>
<li>public | private</li>
</ul>
</li>
<li>etag</li>
<li>last-modified</li>
<li>
<p>if-none-match</p>
</li>
<li>
<p>if-modified-since</p>
</li>
</ul></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="07_high_availability_and_client_side_caching.md">07_high_availability_and_client_side_caching.md</a>
            </aside>
            
            <aside class="page_number">
              32/61
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 07_high_availability_and_client_side_caching.md -->
      <div class="slide-wrapper">
        <div class="slide slide-33">
          <div class="inner">
            
            <header><h1>cache-control: no-store</h1></header>
            
            
            <section><p>When <code>cache-control: no-store</code> is provided as a header to a HTTP response the
browser and intermediate proxy-caches:</p>
<ul>
<li>must not save the information in any non-volatile storage</li>
<li>must make a best effot attempt to remove the information from volatile
  storage as promptly as possible</li>
</ul>
<p><strong>Note</strong>: The browser may retain a copy in memory (volatile storage) for use
with the browser's back/forward buttons.</p>
<p>Generally used for sensitive information.</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="07_high_availability_and_client_side_caching.md">07_high_availability_and_client_side_caching.md</a>
            </aside>
            
            <aside class="page_number">
              33/61
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 07_high_availability_and_client_side_caching.md -->
      <div class="slide-wrapper">
        <div class="slide slide-34">
          <div class="inner">
            
            <header><h1>cache-control: no-cache</h1></header>
            
            
            <section><p>When <code>cache-control: no-cache</code> is provided as a header to a HTTP response the
browser and intermediate proxy-caches:</p>
<ul>
<li>must not use the respose to satisfy a subsequent request without successful
  revalidation with the origin server</li>
</ul>
<p>Useful to force the browser and intermediate chaches to check for updated
content.</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="07_high_availability_and_client_side_caching.md">07_high_availability_and_client_side_caching.md</a>
            </aside>
            
            <aside class="page_number">
              34/61
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 07_high_availability_and_client_side_caching.md -->
      <div class="slide-wrapper">
        <div class="slide slide-35">
          <div class="inner">
            
            <header><h1>cache-control: private</h1></header>
            
            
            <section><p>When <code>cache-control: private</code> is provided as a header to a HTTP response the
browser is free to cache the response (for the current user) but, intermediate
proxy-caches should discard the data.</p>
<p>This is the opposite of <code>cache-control: public</code>.</p>
<p>Rails built-in caching safely assumes <code>cache-control: private</code>.</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="07_high_availability_and_client_side_caching.md">07_high_availability_and_client_side_caching.md</a>
            </aside>
            
            <aside class="page_number">
              35/61
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 07_high_availability_and_client_side_caching.md -->
      <div class="slide-wrapper">
        <div class="slide slide-36">
          <div class="inner">
            
            <header><h1>cache-control: max-age=120</h1></header>
            
            
            <section><p>When <code>cache-control: max-age=120</code> is provided as a header to a HTTP response
the browser and intermediate proxy-caches should consider the information to be
fresh until the specified number of seconds has passed.</p>
<p>This is the modern version of the <code>expires</code> and <code>date</code> headers.</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="07_high_availability_and_client_side_caching.md">07_high_availability_and_client_side_caching.md</a>
            </aside>
            
            <aside class="page_number">
              36/61
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 07_high_availability_and_client_side_caching.md -->
      <div class="slide-wrapper">
        <div class="slide slide-37">
          <div class="inner">
            
            <header><h1>etag: "5bf444d26f9f1c74"</h1></header>
            
            
            <section><p>When an etag (entity tag) header is provided as a header to a HTTP response the
browser will keep an association between the request, the etag, and the
response information.</p>
<p>When requesting the same resource in the future, the browser may add an
<code>if-none-match</code> header along with the etag in the HTTP request.</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="07_high_availability_and_client_side_caching.md">07_high_availability_and_client_side_caching.md</a>
            </aside>
            
            <aside class="page_number">
              37/61
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 07_high_availability_and_client_side_caching.md -->
      <div class="slide-wrapper">
        <div class="slide slide-38">
          <div class="inner">
            
            <header><h1>last-modified: Wed, 14 Oct 2015 23:47:36 GMT</h1></header>
            
            
            <section><p>-</p>
<p>When a <code>last-modified</code> header is provided in an HTTP response the browser may
save the information to use in future requests for the same resource.</p>
<p>When requesting the same resource in the future, the browser may add an
<code>if-modifed-since</code> header along with the datetime in the HTTP request.</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="07_high_availability_and_client_side_caching.md">07_high_availability_and_client_side_caching.md</a>
            </aside>
            
            <aside class="page_number">
              38/61
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 07_high_availability_and_client_side_caching.md -->
      <div class="slide-wrapper">
        <div class="slide slide-39">
          <div class="inner">
            
            <header><h1>if-none-match: "5bf444d26f9f1c74"</h1></header>
            
            
            <section><p>When accompanying a HTTP request, the <code>if-none-match</code> HTTP header indicates
that the client has a cached copy with the associated tag.  Multiple etags can
be provided.</p>
<p>If the server's current version of the resource maps to one of the provided
etags, the server will return 304 (not modified) with the etag of the current
resource included.</p>
<p>Otherwise the server will return the full response body along with the
appropriate etag for the updated resource.</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="07_high_availability_and_client_side_caching.md">07_high_availability_and_client_side_caching.md</a>
            </aside>
            
            <aside class="page_number">
              39/61
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 07_high_availability_and_client_side_caching.md -->
      <div class="slide-wrapper">
        <div class="slide slide-40">
          <div class="inner">
            
            <header><h1>if-modified-since: Wed, 14 Oct 2015 23:47:36 GMT</h1></header>
            
            
            <section><p>-</p>
<p>When accompanying an HTTP request, the <code>if-modified-since</code> HTTP header
indicates that the client already has a copy that was fresh as of the specified
datetime.</p>
<p>If the server's copy is newer than the specified datetime, it will be served to
the client along with a new <code>last-modified</code> HTTP response header.</p>
<p>If the server's copy has not changed since the specified date, the server will
return 304 (not modified).</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="07_high_availability_and_client_side_caching.md">07_high_availability_and_client_side_caching.md</a>
            </aside>
            
            <aside class="page_number">
              40/61
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 07_high_availability_and_client_side_caching.md -->
      <div class="slide-wrapper">
        <div class="slide slide-41">
          <div class="inner">
            
            <header><h1>HTTP Caching Summary</h1></header>
            
            
            <section><p><img alt="Defining optimal Cache-Control policy" src="img/http-cache-decision-tree.png" /></p>
<p>Source: <a href="https://developers.google.com/web/fundamentals/performance/optimizing-content-efficiency/http-caching">https://developers.google.com/web/fundamentals/performance/optimizing-content-efficiency/http-caching</a></p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="07_high_availability_and_client_side_caching.md">07_high_availability_and_client_side_caching.md</a>
            </aside>
            
            <aside class="page_number">
              41/61
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 07_high_availability_and_client_side_caching.md -->
      <div class="slide-wrapper">
        <div class="slide slide-42">
          <div class="inner">
            
            <header><h1>Applying Client-side Caching #1</h1></header>
            
            
            <section><p>Assume we want to serve javascript that won't change over the next day, but it
contains user-specific code.</p>
<blockquote>
<p>What headers should the HTTP response include?</p>
</blockquote></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="07_high_availability_and_client_side_caching.md">07_high_availability_and_client_side_caching.md</a>
            </aside>
            
            <aside class="page_number">
              42/61
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 07_high_availability_and_client_side_caching.md -->
      <div class="slide-wrapper">
        <div class="slide slide-43">
          <div class="inner">
            
            <header><h1>Caching Reusable, Private Resources</h1></header>
            
            
            <section><pre><code>Cache-control: private, max-age=86400
</code></pre>
<p>Intermediate proxy-caches should not save a copy, and the browser can consider
the resource fresh for up to a day since it was retrieved.</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="07_high_availability_and_client_side_caching.md">07_high_availability_and_client_side_caching.md</a>
            </aside>
            
            <aside class="page_number">
              43/61
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 07_high_availability_and_client_side_caching.md -->
      <div class="slide-wrapper">
        <div class="slide slide-44">
          <div class="inner">
            
            <header><h1>Applying Client-side Caching #2</h1></header>
            
            
            <section><p>Assume we are serving an image that may change in the future, and we never want
a stale version shown. The image is not specific to the requester.</p>
<blockquote>
<p>What headers should the HTTP response include?</p>
</blockquote></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="07_high_availability_and_client_side_caching.md">07_high_availability_and_client_side_caching.md</a>
            </aside>
            
            <aside class="page_number">
              44/61
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 07_high_availability_and_client_side_caching.md -->
      <div class="slide-wrapper">
        <div class="slide slide-45">
          <div class="inner">
            
            <header><h1>Caching Reusable, Public Resources</h1></header>
            
            
            <section><pre><code>Cache-control: public, no-cache
ETag: "4d7a6ca05b5df656"
</code></pre>
<p>Browser will store a copy to be used if a 304 (not modified) response is
sent. In subsequent HTTP requests for the resource the browser will include:</p>
<pre><code>if-none-match: "4d7a6ca05b5df656"
</code></pre></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="07_high_availability_and_client_side_caching.md">07_high_availability_and_client_side_caching.md</a>
            </aside>
            
            <aside class="page_number">
              45/61
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 07_high_availability_and_client_side_caching.md -->
      <div class="slide-wrapper">
        <div class="slide slide-46">
          <div class="inner">
            
            <header><h1>Applying Client-side Caching #3</h1></header>
            
            
            <section><p>Assume we are serving an image containing the user's social security and credit
card numbers.</p>
<blockquote>
<p>What headers should the HTTP response include?</p>
</blockquote></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="07_high_availability_and_client_side_caching.md">07_high_availability_and_client_side_caching.md</a>
            </aside>
            
            <aside class="page_number">
              46/61
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 07_high_availability_and_client_side_caching.md -->
      <div class="slide-wrapper">
        <div class="slide slide-47">
          <div class="inner">
            
            <header><h1>No Caching!</h1></header>
            
            
            <section><pre><code>Cache-control: private, no-store
</code></pre>
<p>The browser may keep a copy in memory for browser navigation, but <strong>must</strong>
not save a copy to a non-volatile location.</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="07_high_availability_and_client_side_caching.md">07_high_availability_and_client_side_caching.md</a>
            </aside>
            
            <aside class="page_number">
              47/61
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 07_high_availability_and_client_side_caching.md -->
      <div class="slide-wrapper">
        <div class="slide slide-48">
          <div class="inner">
            
            <header><h1>Implementing Caching In Rails</h1></header>
            
            
            <section><p>Let's start with implementation client-side HTTP caching on the New Submission
page in the demo app:</p>
<p><img alt="Demo App New Submission View" src="img/demo_new_submission.png" /></p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="07_high_availability_and_client_side_caching.md">07_high_availability_and_client_side_caching.md</a>
            </aside>
            
            <aside class="page_number">
              48/61
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 07_high_availability_and_client_side_caching.md -->
      <div class="slide-wrapper">
        <div class="slide slide-49">
          <div class="inner">
            
            <header><h1>Initial Request: New Submission Page</h1></header>
            
            
            <section><p>Initial page load fetches every resource (indicated via 200 response).</p>
<p><img alt="Initial Demo App New Submission Resources" src="img/demo_new_submission_resources.png" /></p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="07_high_availability_and_client_side_caching.md">07_high_availability_and_client_side_caching.md</a>
            </aside>
            
            <aside class="page_number">
              49/61
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 07_high_availability_and_client_side_caching.md -->
      <div class="slide-wrapper">
        <div class="slide slide-50">
          <div class="inner">
            
            <header><h1>Subsequent Request: New Submission</h1></header>
            
            
            <section><p>Refreshing the page doesn't require sending the asset bodies (304 responses),
but the server sends the complete /submissions/new response body (200
response).</p>
<p><img alt="Subsequent Demo App New Submissions Resources" src="img/demo_new_submission_resources_subsequent.png" /></p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="07_high_availability_and_client_side_caching.md">07_high_availability_and_client_side_caching.md</a>
            </aside>
            
            <aside class="page_number">
              50/61
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 07_high_availability_and_client_side_caching.md -->
      <div class="slide-wrapper">
        <div class="slide slide-51">
          <div class="inner">
            
            <header><h1>Determining Staleness</h1></header>
            
            
            <section><blockquote>
<p>When can this page be out-of-date?</p>
</blockquote>
<p><img alt="Demo App New Submission View" src="img/demo_new_submission.png" /></p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="07_high_availability_and_client_side_caching.md">07_high_availability_and_client_side_caching.md</a>
            </aside>
            
            <aside class="page_number">
              51/61
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 07_high_availability_and_client_side_caching.md -->
      <div class="slide-wrapper">
        <div class="slide has_code slide-52">
          <div class="inner">
            
            <header><h1>SubmissionsController.new</h1></header>
            
            
            <section><h2>Without Caching</h2>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="highlight"><pre><span class="k">class</span> <span class="nc">SubmissionsController</span> <span class="o">&lt;</span> <span class="no">ApplicationController</span>

  <span class="k">def</span> <span class="nf">new</span>
    <span class="vi">@submission</span> <span class="o">=</span> <span class="no">Submission</span><span class="o">.</span><span class="n">new</span>
  <span class="k">end</span>

<span class="k">end</span>
</pre></div>
</td></tr></table>
<h2>With Caching</h2>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="highlight"><pre><span class="k">class</span> <span class="nc">SubmissionsController</span> <span class="o">&lt;</span> <span class="no">ApplicationController</span>

  <span class="k">def</span> <span class="nf">new</span>
    <span class="vi">@submission</span> <span class="o">=</span> <span class="no">Submission</span><span class="o">.</span><span class="n">new</span> <span class="k">if</span> <span class="n">stale?</span><span class="p">(</span><span class="no">Community</span><span class="o">.</span><span class="n">all</span><span class="p">)</span>
  <span class="k">end</span>

<span class="k">end</span>
</pre></div>
</td></tr></table></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="07_high_availability_and_client_side_caching.md">07_high_availability_and_client_side_caching.md</a>
            </aside>
            
            <aside class="page_number">
              52/61
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 07_high_availability_and_client_side_caching.md -->
      <div class="slide-wrapper">
        <div class="slide slide-53">
          <div class="inner">
            
            <header><h1>ActionController::ConditionalGet.stale?</h1></header>
            
            
            <section><p><a href="http://apidock.com/rails/ActionController/ConditionalGet/stale%3F">http://apidock.com/rails/ActionController/ConditionalGet/stale%3F</a></p>
<blockquote>
<p>What is <code>if stale?(Community.all)</code> actually doing?</p>
</blockquote>
<ul>
<li>Informs Rails to base the <code>etag</code> and/or <code>last_modified</code> response header on
  all communities.</li>
<li>Compares the <code>last_modified</code> or <code>etag</code> value against <code>if-modified-since</code>
  and/or <code>if-none-match</code> request headers.</li>
<li><code>stale?</code> returns true when <code>Communities.all</code> is newer and/or differs</li>
<li><code>stale?</code> implicitly affects the response such that a 304 HTTP status and no
  body is returned when <code>stale?</code> returns false</li>
</ul></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="07_high_availability_and_client_side_caching.md">07_high_availability_and_client_side_caching.md</a>
            </aside>
            
            <aside class="page_number">
              53/61
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 07_high_availability_and_client_side_caching.md -->
      <div class="slide-wrapper">
        <div class="slide slide-54">
          <div class="inner">
            
            <header><h1>Cached: New Submission Page</h1></header>
            
            
            <section><p>After making the above change, a second request to <code>/submissions/new</code> results
in a 304 (not modified) response.</p>
<p>If the list of communities change subsequent
responses will return a 200 along with the body of the response.</p>
<p><img alt="Cached Demo App New Submissions Resources" src="img/demo_new_submission_resources_cached.png" /></p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="07_high_availability_and_client_side_caching.md">07_high_availability_and_client_side_caching.md</a>
            </aside>
            
            <aside class="page_number">
              54/61
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 07_high_availability_and_client_side_caching.md -->
      <div class="slide-wrapper">
        <div class="slide img-left slide-55">
          <div class="inner">
            
            <header><h1>Submission View</h1></header>
            
            
            <section><p><img alt="Submission View" src="img/demo_submission_view.png" /></p>
<blockquote>
<p>What on the submission view can make the page stale?</p>
</blockquote></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="07_high_availability_and_client_side_caching.md">07_high_availability_and_client_side_caching.md</a>
            </aside>
            
            <aside class="page_number">
              55/61
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 07_high_availability_and_client_side_caching.md -->
      <div class="slide-wrapper">
        <div class="slide has_code slide-56">
          <div class="inner">
            
            <header><h1>SubmissionController.show</h1></header>
            
            
            <section><h2>Without Caching</h2>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></div></td><td class="code"><div class="highlight"><pre><span class="k">class</span> <span class="nc">SubmissionsController</span> <span class="o">&lt;</span> <span class="no">ApplicationController</span>
  <span class="n">before_action</span> <span class="ss">:set_submission</span><span class="p">,</span> <span class="ss">only</span><span class="p">:</span> <span class="o">[</span><span class="ss">:show</span><span class="p">,</span> <span class="o">...]</span>

  <span class="k">def</span> <span class="nf">show</span>
  <span class="k">end</span>

  <span class="kp">private</span>

  <span class="k">def</span> <span class="nf">set_submission</span>
    <span class="vi">@submission</span> <span class="o">=</span> <span class="no">Submission</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">params</span><span class="o">[</span><span class="ss">:id</span><span class="o">]</span><span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div>
</td></tr></table></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="07_high_availability_and_client_side_caching.md">07_high_availability_and_client_side_caching.md</a>
            </aside>
            
            <aside class="page_number">
              56/61
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 07_high_availability_and_client_side_caching.md -->
      <div class="slide-wrapper">
        <div class="slide has_code slide-57">
          <div class="inner">
            
            <header><h1>SubmissionController.show</h1></header>
            
            
            <section><h2>With Caching</h2>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14</pre></div></td><td class="code"><div class="highlight"><pre><span class="k">class</span> <span class="nc">SubmissionsController</span> <span class="o">&lt;</span> <span class="no">ApplicationController</span>
  <span class="n">before_action</span> <span class="ss">:set_submission</span><span class="p">,</span> <span class="ss">only</span><span class="p">:</span> <span class="o">[</span><span class="ss">:show</span><span class="p">,</span> <span class="o">...]</span>

  <span class="k">def</span> <span class="nf">show</span>
    <span class="n">frseh_when</span><span class="p">(</span><span class="o">[</span><span class="vi">@submission</span><span class="p">,</span> <span class="vi">@submission</span><span class="o">.</span><span class="n">community</span><span class="p">,</span>
                <span class="vi">@submission</span><span class="o">.</span><span class="n">comments</span><span class="o">]</span><span class="p">)</span>
  <span class="k">end</span>

  <span class="kp">private</span>

  <span class="k">def</span> <span class="nf">set_submission</span>
    <span class="vi">@submission</span> <span class="o">=</span> <span class="no">Submission</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">params</span><span class="o">[</span><span class="ss">:id</span><span class="o">]</span><span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div>
</td></tr></table></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="07_high_availability_and_client_side_caching.md">07_high_availability_and_client_side_caching.md</a>
            </aside>
            
            <aside class="page_number">
              57/61
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 07_high_availability_and_client_side_caching.md -->
      <div class="slide-wrapper">
        <div class="slide slide-58">
          <div class="inner">
            
            <header><h1>Cached: SubmissionController.show</h1></header>
            
            
            <section><p>The web console indicates our caching was successful.</p>
<p>Adding a new comment, modifying the community or submission causes a 200
response.</p>
<p><img alt="Cached Demo App Submission Show" src="img/demo_submission_view_cached.png" /></p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="07_high_availability_and_client_side_caching.md">07_high_availability_and_client_side_caching.md</a>
            </aside>
            
            <aside class="page_number">
              58/61
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 07_high_availability_and_client_side_caching.md -->
      <div class="slide-wrapper">
        <div class="slide slide-59">
          <div class="inner">
            
            <header><h1>Submissions Index</h1></header>
            
            
            <section><blockquote>
<p>What on the submissions index can make the page stale?</p>
</blockquote>
<p><img alt="Submissions Index View" src="img/demo_submissions_index.png" /></p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="07_high_availability_and_client_side_caching.md">07_high_availability_and_client_side_caching.md</a>
            </aside>
            
            <aside class="page_number">
              59/61
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 07_high_availability_and_client_side_caching.md -->
      <div class="slide-wrapper">
        <div class="slide has_code slide-60">
          <div class="inner">
            
            <header><h1>SubmissionController.index</h1></header>
            
            
            <section><h2>Without Caching</h2>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="highlight"><pre><span class="k">class</span> <span class="nc">SubmissionsController</span> <span class="o">&lt;</span> <span class="no">ApplicationController</span>

  <span class="k">def</span> <span class="nf">index</span>
    <span class="vi">@submissions</span> <span class="o">=</span> <span class="no">Submission</span><span class="o">.</span><span class="n">all</span>
  <span class="k">end</span>

<span class="k">end</span>
</pre></div>
</td></tr></table>
<h2>With Caching</h2>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="highlight"><pre><span class="k">class</span> <span class="nc">SubmissionsController</span> <span class="o">&lt;</span> <span class="no">ApplicationController</span>

  <span class="k">def</span> <span class="nf">index</span>
    <span class="k">if</span> <span class="n">stale?</span><span class="p">(</span><span class="o">[</span><span class="no">Submission</span><span class="o">.</span><span class="n">all</span><span class="p">,</span> <span class="no">Community</span><span class="o">.</span><span class="n">all</span><span class="p">,</span> <span class="no">Comments</span><span class="o">.</span><span class="n">all</span><span class="o">]</span><span class="p">)</span>
      <span class="vi">@submissions</span> <span class="o">=</span> <span class="no">Submission</span><span class="o">.</span><span class="n">all</span>
    <span class="k">end</span>
  <span class="k">end</span>

<span class="k">end</span>
</pre></div>
</td></tr></table></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="07_high_availability_and_client_side_caching.md">07_high_availability_and_client_side_caching.md</a>
            </aside>
            
            <aside class="page_number">
              60/61
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 07_high_availability_and_client_side_caching.md -->
      <div class="slide-wrapper">
        <div class="slide slide-61">
          <div class="inner">
            
            <header><h1>Client Caching Example</h1></header>
            
            
            <section><p>These changes can be viewed the <code>client_side_caching</code> branch on the demo app
repository:</p>
<p><a href="https://github.com/scalableinternetservices/demo/compare/client_side_caching">https://github.com/scalableinternetservices/demo/compare/client_side_caching</a></p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="07_high_availability_and_client_side_caching.md">07_high_availability_and_client_side_caching.md</a>
            </aside>
            
            <aside class="page_number">
              61/61
            </aside>
          </footer>
        </div>
      </div>
      
    </div>
  </div>
  
  <div id="toc" class="sidebar hidden">
    <h2>Table of Contents</h2>
    <table>
      <caption>Table of Contents</caption>
      
      <tr id="toc-row-1">
        <th><a href="#slide1">High Availability and Client-side Caching</a></th>
        <td><a href="#slide1">1</a></td>
      </tr>
      
      
      <tr id="toc-row-2">
        <th><a href="#slide2">Today's Agenda</a></th>
        <td><a href="#slide2">2</a></td>
      </tr>
      
      
      <tr id="toc-row-3">
        <th><a href="#slide3">TODO</a></th>
        <td><a href="#slide3">3</a></td>
      </tr>
      
      
      <tr id="toc-row-4">
        <th><a href="#slide4">Scaling Review</a></th>
        <td><a href="#slide4">4</a></td>
      </tr>
      
      
      <tr id="toc-row-5">
        <th><a href="#slide5">Last Lecture Corrections</a></th>
        <td><a href="#slide5">5</a></td>
      </tr>
      
      
      <tr id="toc-row-6">
        <th><a href="#slide6">High Availability Motivation</a></th>
        <td><a href="#slide6">6</a></td>
      </tr>
      
      
      <tr id="toc-row-7">
        <th><a href="#slide7">Expressing Availability</a></th>
        <td><a href="#slide7">7</a></td>
      </tr>
      
      
      <tr id="toc-row-8">
        <th><a href="#slide8">Question</a></th>
        <td><a href="#slide8">8</a></td>
      </tr>
      
      
      <tr id="toc-row-9">
        <th><a href="#slide9">What if...</a></th>
        <td><a href="#slide9">9</a></td>
      </tr>
      
      
      <tr id="toc-row-10">
        <th><a href="#slide10">Handling Application Server Failure</a></th>
        <td><a href="#slide10">10</a></td>
      </tr>
      
      
      <tr id="toc-row-11">
        <th><a href="#slide11">How do we Handle Load Balancer Failure?</a></th>
        <td><a href="#slide11">11</a></td>
      </tr>
      
      
      <tr id="toc-row-12">
        <th><a href="#slide12">Redundant Load Balancers</a></th>
        <td><a href="#slide12">12</a></td>
      </tr>
      
      
      <tr id="toc-row-13">
        <th><a href="#slide13">Load Balancer Failover</a></th>
        <td><a href="#slide13">13</a></td>
      </tr>
      
      
      <tr id="toc-row-14">
        <th><a href="#slide14">How do we Handle Switch Failure?</a></th>
        <td><a href="#slide14">14</a></td>
      </tr>
      
      
      <tr id="toc-row-15">
        <th><a href="#slide15">Redundant Switches</a></th>
        <td><a href="#slide15">15</a></td>
      </tr>
      
      
      <tr id="toc-row-16">
        <th><a href="#slide16">How do we Handle Router Failure?</a></th>
        <td><a href="#slide16">16</a></td>
      </tr>
      
      
      <tr id="toc-row-17">
        <th><a href="#slide17">Redundant Routers</a></th>
        <td><a href="#slide17">17</a></td>
      </tr>
      
      
      <tr id="toc-row-18">
        <th><a href="#slide18">How do we Handle Internet Failure?</a></th>
        <td><a href="#slide18">18</a></td>
      </tr>
      
      
      <tr id="toc-row-19">
        <th><a href="#slide19">Routing with Two ISPs</a></th>
        <td><a href="#slide19">19</a></td>
      </tr>
      
      
      <tr id="toc-row-20">
        <th><a href="#slide20">High Availability</a></th>
        <td><a href="#slide20">20</a></td>
      </tr>
      
      
      <tr id="toc-row-21">
        <th><a href="#slide21">Redundancy Everywhere!</a></th>
        <td><a href="#slide21">21</a></td>
      </tr>
      
      
      <tr id="toc-row-22">
        <th><a href="#slide22">Disaster Strikes</a></th>
        <td><a href="#slide22">22</a></td>
      </tr>
      
      
      <tr id="toc-row-23">
        <th><a href="#slide23">Hurricane Sandy via Ars Technica</a></th>
        <td><a href="#slide23">23</a></td>
      </tr>
      
      
      <tr id="toc-row-24">
        <th><a href="#slide24">Availability Axiom (Pete Tenereillo)</a></th>
        <td><a href="#slide24">24</a></td>
      </tr>
      
      
      <tr id="toc-row-25">
        <th><a href="#slide25">Multisite High Availability</a></th>
        <td><a href="#slide25">25</a></td>
      </tr>
      
      
      <tr id="toc-row-26">
        <th><a href="#slide26">Client-side Caching</a></th>
        <td><a href="#slide26">26</a></td>
      </tr>
      
      
      <tr id="toc-row-27">
        <th><a href="#slide27">Client-side Caching Motivation</a></th>
        <td><a href="#slide27">27</a></td>
      </tr>
      
      
      <tr id="toc-row-28">
        <th><a href="#slide28">Reponse Time and Human Perception</a></th>
        <td><a href="#slide28">28</a></td>
      </tr>
      
      
      <tr id="toc-row-29">
        <th><a href="#slide29">Minimum Latencies</a></th>
        <td><a href="#slide29">29</a></td>
      </tr>
      
      
      <tr id="toc-row-30">
        <th><a href="#slide30">Multiple HTTP Requests per Page</a></th>
        <td><a href="#slide30">30</a></td>
      </tr>
      
      
      <tr id="toc-row-31">
        <th><a href="#slide31">Caching</a></th>
        <td><a href="#slide31">31</a></td>
      </tr>
      
      
      <tr id="toc-row-32">
        <th><a href="#slide32">Client-side Caching</a></th>
        <td><a href="#slide32">32</a></td>
      </tr>
      
      
      <tr id="toc-row-33">
        <th><a href="#slide33">cache-control: no-store</a></th>
        <td><a href="#slide33">33</a></td>
      </tr>
      
      
      <tr id="toc-row-34">
        <th><a href="#slide34">cache-control: no-cache</a></th>
        <td><a href="#slide34">34</a></td>
      </tr>
      
      
      <tr id="toc-row-35">
        <th><a href="#slide35">cache-control: private</a></th>
        <td><a href="#slide35">35</a></td>
      </tr>
      
      
      <tr id="toc-row-36">
        <th><a href="#slide36">cache-control: max-age=120</a></th>
        <td><a href="#slide36">36</a></td>
      </tr>
      
      
      <tr id="toc-row-37">
        <th><a href="#slide37">etag: "5bf444d26f9f1c74"</a></th>
        <td><a href="#slide37">37</a></td>
      </tr>
      
      
      <tr id="toc-row-38">
        <th><a href="#slide38">last-modified: Wed, 14 Oct 2015 23:47:36 GMT</a></th>
        <td><a href="#slide38">38</a></td>
      </tr>
      
      
      <tr id="toc-row-39">
        <th><a href="#slide39">if-none-match: "5bf444d26f9f1c74"</a></th>
        <td><a href="#slide39">39</a></td>
      </tr>
      
      
      <tr id="toc-row-40">
        <th><a href="#slide40">if-modified-since: Wed, 14 Oct 2015 23:47:36 GMT</a></th>
        <td><a href="#slide40">40</a></td>
      </tr>
      
      
      <tr id="toc-row-41">
        <th><a href="#slide41">HTTP Caching Summary</a></th>
        <td><a href="#slide41">41</a></td>
      </tr>
      
      
      <tr id="toc-row-42">
        <th><a href="#slide42">Applying Client-side Caching #1</a></th>
        <td><a href="#slide42">42</a></td>
      </tr>
      
      
      <tr id="toc-row-43">
        <th><a href="#slide43">Caching Reusable, Private Resources</a></th>
        <td><a href="#slide43">43</a></td>
      </tr>
      
      
      <tr id="toc-row-44">
        <th><a href="#slide44">Applying Client-side Caching #2</a></th>
        <td><a href="#slide44">44</a></td>
      </tr>
      
      
      <tr id="toc-row-45">
        <th><a href="#slide45">Caching Reusable, Public Resources</a></th>
        <td><a href="#slide45">45</a></td>
      </tr>
      
      
      <tr id="toc-row-46">
        <th><a href="#slide46">Applying Client-side Caching #3</a></th>
        <td><a href="#slide46">46</a></td>
      </tr>
      
      
      <tr id="toc-row-47">
        <th><a href="#slide47">No Caching!</a></th>
        <td><a href="#slide47">47</a></td>
      </tr>
      
      
      <tr id="toc-row-48">
        <th><a href="#slide48">Implementing Caching In Rails</a></th>
        <td><a href="#slide48">48</a></td>
      </tr>
      
      
      <tr id="toc-row-49">
        <th><a href="#slide49">Initial Request: New Submission Page</a></th>
        <td><a href="#slide49">49</a></td>
      </tr>
      
      
      <tr id="toc-row-50">
        <th><a href="#slide50">Subsequent Request: New Submission</a></th>
        <td><a href="#slide50">50</a></td>
      </tr>
      
      
      <tr id="toc-row-51">
        <th><a href="#slide51">Determining Staleness</a></th>
        <td><a href="#slide51">51</a></td>
      </tr>
      
      
      <tr id="toc-row-52">
        <th><a href="#slide52">SubmissionsController.new</a></th>
        <td><a href="#slide52">52</a></td>
      </tr>
      
      
      <tr id="toc-row-53">
        <th><a href="#slide53">ActionController::ConditionalGet.stale?</a></th>
        <td><a href="#slide53">53</a></td>
      </tr>
      
      
      <tr id="toc-row-54">
        <th><a href="#slide54">Cached: New Submission Page</a></th>
        <td><a href="#slide54">54</a></td>
      </tr>
      
      
      <tr id="toc-row-55">
        <th><a href="#slide55">Submission View</a></th>
        <td><a href="#slide55">55</a></td>
      </tr>
      
      
      <tr id="toc-row-56">
        <th><a href="#slide56">SubmissionController.show</a></th>
        <td><a href="#slide56">56</a></td>
      </tr>
      
      
      <tr id="toc-row-57">
        <th><a href="#slide57">SubmissionController.show</a></th>
        <td><a href="#slide57">57</a></td>
      </tr>
      
      
      <tr id="toc-row-58">
        <th><a href="#slide58">Cached: SubmissionController.show</a></th>
        <td><a href="#slide58">58</a></td>
      </tr>
      
      
      <tr id="toc-row-59">
        <th><a href="#slide59">Submissions Index</a></th>
        <td><a href="#slide59">59</a></td>
      </tr>
      
      
      <tr id="toc-row-60">
        <th><a href="#slide60">SubmissionController.index</a></th>
        <td><a href="#slide60">60</a></td>
      </tr>
      
      
      <tr id="toc-row-61">
        <th><a href="#slide61">Client Caching Example</a></th>
        <td><a href="#slide61">61</a></td>
      </tr>
      
      
    </table>
  </div>
  
  <div id="help" class="sidebar hidden">
    <h2>Help</h2>
    <table>
      <caption>Help</caption>
      <tr>
        <th>Table of Contents</th>
        <td>t</td>
      </tr>
      <tr>
        <th>Exposé</th>
        <td>ESC</td>
      </tr>
      <tr>
        <th>Full screen slides</th>
        <td>e</td>
      </tr>
      <tr>
        <th>Presenter View</th>
        <td>p</td>
      </tr>
      <tr>
        <th>Source Files</th>
        <td>s</td>
      </tr>
      <tr>
        <th>Slide Numbers</th>
        <td>n</td>
      </tr>
      <tr>
        <th>Toggle screen blanking</th>
        <td>b</td>
      </tr>
      <tr>
        <th>Show/hide slide context</th>
        <td>c</td>
      </tr>
      <tr>
        <th>Notes</th>
        <td>2</td>
      </tr>
      <tr>
        <th>Help</th>
        <td>h</td>
      </tr>
    </table>
  </div>
  <script>main()</script>
</body>
</html>